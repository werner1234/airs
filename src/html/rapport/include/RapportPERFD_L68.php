<?php
/*
Author  						: $Author: rvv $
Laatste aanpassing	: $Date: 2020/07/29 13:56:12 $
File Versie					: $Revision: 1.69 $

$Log: RapportPERFD_L68.php,v $
Revision 1.69  2020/07/29 13:56:12  rvv
*** empty log message ***

Revision 1.68  2020/02/19 15:02:02  rvv
*** empty log message ***

Revision 1.67  2020/01/25 16:36:35  rvv
*** empty log message ***

Revision 1.66  2019/12/14 17:46:24  rvv
*** empty log message ***

Revision 1.65  2019/12/07 17:48:23  rvv
*** empty log message ***

Revision 1.64  2019/11/27 15:55:39  rvv
*** empty log message ***

Revision 1.63  2019/11/02 15:20:30  rvv
*** empty log message ***

Revision 1.62  2019/10/16 05:36:15  rvv
*** empty log message ***

Revision 1.61  2019/10/02 15:12:58  rvv
*** empty log message ***

Revision 1.60  2019/09/28 17:20:17  rvv
*** empty log message ***

Revision 1.59  2019/09/11 15:48:05  rvv
*** empty log message ***

Revision 1.58  2019/08/28 15:43:58  rvv
*** empty log message ***

Revision 1.57  2019/08/03 17:23:01  rvv
*** empty log message ***

Revision 1.56  2019/08/03 17:03:12  rvv
*** empty log message ***

Revision 1.55  2019/05/25 16:22:07  rvv
*** empty log message ***

Revision 1.54  2019/05/02 06:15:30  rvv
*** empty log message ***

Revision 1.53  2019/05/01 15:53:25  rvv
*** empty log message ***

Revision 1.52  2019/04/10 15:50:36  rvv
*** empty log message ***

Revision 1.51  2019/01/09 15:52:19  rvv
*** empty log message ***

Revision 1.50  2018/12/08 18:28:30  rvv
*** empty log message ***

Revision 1.49  2018/11/24 19:11:26  rvv
*** empty log message ***

Revision 1.48  2018/11/10 18:20:33  rvv
*** empty log message ***

Revision 1.47  2018/11/03 18:45:31  rvv
*** empty log message ***

Revision 1.46  2018/10/29 06:34:35  rvv
*** empty log message ***

Revision 1.45  2018/10/27 16:49:57  rvv
*** empty log message ***

Revision 1.44  2018/08/18 12:40:14  rvv
php 5.6 & consolidatie

Revision 1.43  2018/07/28 14:45:48  rvv
*** empty log message ***

Revision 1.42  2018/07/14 14:04:37  rvv
*** empty log message ***

Revision 1.41  2018/07/11 16:16:40  rvv
*** empty log message ***

Revision 1.40  2018/06/27 16:13:50  rvv
*** empty log message ***

Revision 1.39  2018/06/20 16:40:16  rvv
*** empty log message ***

Revision 1.38  2018/06/09 15:58:54  rvv
*** empty log message ***

Revision 1.37  2018/05/30 16:10:58  rvv
*** empty log message ***

Revision 1.36  2018/05/26 17:23:51  rvv
*** empty log message ***

Revision 1.35  2018/05/23 13:51:26  rvv
*** empty log message ***

Revision 1.34  2018/05/19 16:24:53  rvv
*** empty log message ***

Revision 1.33  2018/05/16 15:32:27  rvv
*** empty log message ***

Revision 1.32  2018/04/26 07:43:22  rvv
*** empty log message ***

Revision 1.31  2018/04/25 16:45:28  rvv
*** empty log message ***

Revision 1.30  2018/04/22 09:29:52  rvv
*** empty log message ***

Revision 1.29  2018/04/21 17:55:51  rvv
*** empty log message ***

Revision 1.28  2018/03/31 18:06:01  rvv
*** empty log message ***

Revision 1.27  2018/02/21 17:15:09  rvv
*** empty log message ***

Revision 1.26  2018/02/14 16:53:20  rvv
*** empty log message ***

Revision 1.25  2017/12/09 17:54:25  rvv
*** empty log message ***

Revision 1.24  2017/10/28 18:03:18  rvv
*** empty log message ***

Revision 1.23  2017/10/18 15:29:27  rvv
*** empty log message ***

Revision 1.22  2017/10/14 17:27:54  rvv
*** empty log message ***

Revision 1.21  2017/10/07 17:19:52  rvv
*** empty log message ***

Revision 1.20  2017/10/04 16:09:09  rvv
*** empty log message ***

Revision 1.19  2017/09/24 10:02:35  rvv
*** empty log message ***

Revision 1.18  2017/09/09 18:01:12  rvv
*** empty log message ***

Revision 1.17  2017/09/06 16:31:45  rvv
*** empty log message ***

Revision 1.16  2017/07/23 13:36:28  rvv
*** empty log message ***

Revision 1.15  2017/07/09 11:57:36  rvv
*** empty log message ***

Revision 1.14  2017/07/05 16:06:40  rvv
*** empty log message ***

Revision 1.13  2017/07/01 11:16:18  rvv
*** empty log message ***

Revision 1.12  2017/06/18 09:18:24  rvv
*** empty log message ***

Revision 1.11  2017/04/12 15:38:14  rvv
*** empty log message ***

Revision 1.10  2016/12/17 16:33:26  rvv
*** empty log message ***

Revision 1.9  2016/09/18 08:49:02  rvv
*** empty log message ***

Revision 1.8  2016/06/19 15:22:08  rvv
*** empty log message ***

Revision 1.7  2016/06/12 10:27:20  rvv
*** empty log message ***

Revision 1.6  2016/05/29 13:47:41  rvv
*** empty log message ***

Revision 1.5  2016/05/29 13:26:30  rvv
*** empty log message ***

Revision 1.4  2016/05/21 19:00:02  rvv
*** empty log message ***

Revision 1.3  2016/05/15 17:15:00  rvv
*** empty log message ***

Revision 1.2  2016/05/08 19:24:24  rvv
*** empty log message ***



*/
include_once("rapportRekenClass.php");
include_once($__appvar["basedir"]."/html/rapport/rapportVertaal.php");
include_once($__appvar["basedir"]."/html/rapport/Zorgplichtcontrole.php");
include_once("rapport/include/ATTberekening_L68.php");
include_once($__appvar["basedir"]."/html/rapport/rapportSDberekening.php");
include_once($__appvar["basedir"]."/html/rapport/RapportVKM.php");
include_once("rapport/include/RapportPERF_L68.php");

class RapportPERFD_L68
{

	function RapportPERFD_L68($pdf, $portefeuille, $rapportageDatumVanaf, $rapportageDatum)
	{
		global $__appvar;
		$this->__appvar = $__appvar;
		$this->pdf = &$pdf;
		$this->pdf->rapport_type = "PERFD";
		$this->pdf->rapport_datum = db2jul($rapportageDatum);
		$this->pdf->rapport_datumvanaf = db2jul($rapportageDatumVanaf);
		$this->pdf->underlinePercentage=1;
    $this->portefeuille = $portefeuille;
    $this->rapportageDatumVanaf = $rapportageDatumVanaf;
    $this->rapportageDatum = $rapportageDatum;
 
    $this->perf = new RapportPERF_L68($this->pdf,$portefeuille, $this->rapportageDatumVanaf, $this->rapportageDatum);
    $this->pdf->rapport_titel = "Performancemeting over de portefeuilles";



	  if(strval($pdf->rapport_ATT_decimaal) != '')
	    $this->bedragDecimalen=$pdf->rapport_ATT_decimaal;
	  else
	    $this->bedragDecimalen=0;

	  $this->periodeId = substr(jul2db(db2jul($this->rapportageDatumVanaf)),0,10)."-".substr(jul2db(db2jul($this->rapportageDatum)),0,10);
	  $this->db = new DB();


	}



  function formatGetalKoers($waarde, $dec , $start = false)
	{
	  if ($start == false)
	    $waarde = $waarde / $this->pdf->ValutaKoersEind;
	  else
	    $waarde = $waarde / $this->pdf->ValutaKoersBegin;

	  return number_format($waarde,$dec,",",".");
  }

	function formatGetal($waarde, $dec)
	{
		  return number_format($waarde,$dec,",",".");
	}

	function printSubTotaal($title, $totaalA, $totaalB)
	{
		// geen subtotaal!
		return true;
	}

	function tweedeStart()
	{
	  $RapStartJaar = date("Y", db2jul($this->rapportageDatumVanaf));
	  if(db2jul($this->pdf->PortefeuilleStartdatum) > db2jul($this->rapportageDatumVanaf))
	    $this->tweedePerformanceStart = $this->pdf->PortefeuilleStartdatum;
	  elseif(db2jul($this->pdf->PortefeuilleStartdatum) > db2jul("$RapStartJaar-01-01"))
	    $this->tweedePerformanceStart = $this->pdf->PortefeuilleStartdatum;
	  else
	   $this->tweedePerformanceStart = "$RapStartJaar-01-01";
	}




  function getCRMnaam($portefeuille)
  {
    $db = new DB();
    $query="SELECT naam FROM CRM_naw WHERE portefeuille='$portefeuille'";
    $db->SQL($query);
    $crmData=$db->lookupRecord();
    $naamParts=explode('-',$crmData['naam'],2);
    $naam=trim($naamParts[1]);
    if($naam<>'')
      return $naam;
    else
      return $portefeuille;
  }


	function writeRapport()
	{
	  $this->tweedeStart();
		$this->pdf->SetLineWidth($this->pdf->lineWidth);
	
  $realCategorie=array();
  foreach($this->berekening->categorien as $categorie)
  {
    if($this->waarden['lopendeJaar']['eindWaarde'][$categorie] <> 0 || $this->waarden['lopendeJaar']['beginWaarde'][$categorie] <> 0 || $this->waarden['lopendeJaar']['stortingen'][$categorie] <> 0 || $this->waarden['lopendeJaar']['onttrekkingen'][$categorie] <> 0)
    {
      $realCategorie[]=$categorie;
    }
  }
  
    $tmpCat=array();
    foreach($realCategorie as $categorie)
    {
      if($categorie <> 'Totaal' && $categorie <> 'Liquiditeiten')
        $tmpCat[]=$categorie;
    }

    if(count($realCategorie) > 6)
      $x=185/count($realCategorie)-3;
    else
      $x=20;

    $this->pdf->widthA = array(0,130,$x,3,$x,3,$x,3,$x,3,$x,3,$x,3,$x,3,$x,3,$x,3,$x,3);
		$this->pdf->alignA = array('L','L','R','R','R','R','R','R','R','R','R','R','R','R','R','R','R','R','R','R');
    $this->pdf->widthB = array(0,130,30,10,30,116);
		$this->pdf->alignB = array('L','L','R','R','R','R','R','R');
    $this->pdf->templateVars['PERFDPaginas']=$this->pdf->page+1;
    $this->pdf->templateVarsOmschrijving['PERFDPaginas']=$this->pdf->rapport_titel;

      $fillPortefeuilles=$this->pdf->portefeuilles;
      if(is_array($this->pdf->__appvar['consolidatie']))
        $fillPortefeuilles[]=$this->portefeuille;
      if(count($fillPortefeuilles)==0)
        $fillPortefeuilles=array($this->portefeuille);
      if(!is_array($this->pdf->portefeuilles))
        $this->pdf->portefeuilles=$fillPortefeuilles;

      $this->gebruiktePortefeuilles=array();
      foreach($fillPortefeuilles as $portefeuille)
      {
        if(!isset($this->perfWaarden[$portefeuille]))
        {
          $this->perfWaarden[$portefeuille] = $this->getWaarden($portefeuille, $this->rapportageDatumVanaf, $this->rapportageDatum);
        }
        $tmp=$this->perfWaarden[$portefeuille];
        if(round($tmp['waardeEind'])<>0 || round($tmp['waardeBegin'])<>0 || round($tmp['stortingen'])<>0 || round($tmp['onttrekkingen'])<>0 || round($tmp['resultaatVerslagperiode'])<>0)
        {
          if($portefeuille<>$this->portefeuille || count($fillPortefeuilles)==1)
            $this->gebruiktePortefeuilles[]=$portefeuille;
        }
      }

      $backup=$this->pdf->portefeuilles;
      $aantalPortefeuilles=count($this->gebruiktePortefeuilles);
      $this->portefeuillesList=array();
      if($aantalPortefeuilles>6)
      {
        $n=1;
        $p=0;
        $verdeling=array();
        $tmp=array();
        foreach($this->gebruiktePortefeuilles as $index=>$portefeuille)
        {
          //echo "$n $p $aantalPortefeuilles $portefeuille <br>\n";
          $tmp[]=$portefeuille;
          if($n%6==0 || $n == $aantalPortefeuilles)
          {
            $verdeling[$p]=$tmp;
            $tmp=array();
            $p++;
           // $n=0;
          }
          
          $n++;
        }
        //listarray($verdeling);exit;
        foreach($verdeling as $pagina=>$portefeuilles)
        {
          $this->portefeuillesList=$portefeuilles;
          $this->addconsolidatie();
        }
        $this->pdf->portefeuilles=$backup;
      }
      else
      {

        $this->portefeuillesList=$this->gebruiktePortefeuilles;
        $this->addconsolidatie();
      }

   $this->VKMBerekening();
	}

  
  

 function addconsolidatie()
 {
  

  //$this->pdf->doubleHeader=true;
  $this->pdf->addPage();


  $fillArray=array(0,1);
  $subOnder=array('','');
  $volOnder=array('U','U');
  $subBoven=array('','');
  $header=array("",vertaalTekst(" \nResultaat verslagperiode",$this->pdf->rapport_taal));
  $samenstelling=array("",vertaalTekst("Samenstelling resultaat over verslagperiode",$this->pdf->rapport_taal));
  
  $db=new DB();

  if(isset($this->pdf->__appvar['consolidatie']) && !in_array($this->portefeuille,$this->portefeuillesList))
    $portefeuilles[]=$this->portefeuille;
  else
    $portefeuilles=array();

  foreach($this->portefeuillesList as $portefeuille)
    $portefeuilles[]=$portefeuille;


  $perfWaarden=array();
  foreach($portefeuilles as $portefeuille)
  {
    $kop=$this->getCRMnaam($portefeuille);

    $query="SELECT Depotbanken.omschrijving,Portefeuilles.ClientVermogensbeheerder FROM Depotbanken JOIN Portefeuilles ON Portefeuilles.Depotbank=Depotbanken.Depotbank WHERE Portefeuilles.Portefeuille='".$portefeuille."'";
    $db->SQL($query);
    $depotbank=$db->lookupRecord();
    $volOnder[]='U';
    $volOnder[]='U';
    $subOnder[]='U';
    $subOnder[]='';
    $subBoven[]='T';
    $subBoven[]='';    
    $fillArray[]=1;
    $fillArray[]=1;
    if($portefeuille==$this->portefeuille)
      $header[]=vertaalTekst("Totaal",$this->pdf->rapport_taal);
    else
    {
      if($portefeuille<> $kop)
        $header[] = $kop;
      elseif($depotbank['ClientVermogensbeheerder']<>'')
        $header[] = $depotbank['ClientVermogensbeheerder'] . "\n" . $depotbank['omschrijving'];
      else
        $header[] = $portefeuille. "\n" . $depotbank['omschrijving'];
    }
    $header[]='';
    $samenstelling[]='';
    $samenstelling[]='';
    if(!isset($this->perfWaarden[$portefeuille]))
      $this->perfWaarden[$portefeuille]=$this->getWaarden($portefeuille,$this->rapportageDatumVanaf,$this->rapportageDatum);
      
    $perfWaarden[$portefeuille]=$this->perfWaarden[$portefeuille];
  }

  foreach($perfWaarden as $port=>$waarden)
  {
    foreach($waarden['opbrengstenPerGrootboek'] as $categorie=>$waarde)
      if(round($waarde,2)!=0.00)
       $opbrengstCategorien[$categorie]=$categorie;
    foreach($waarden['kostenPerGrootboek'] as $categorie=>$waarde)
      if(round($waarde,2)!=0.00)
        $kostenCategorien[$categorie]=$categorie;   
  }
  
  $perbegin=array("",vertaalTekst("Waarde portefeuille per",$this->pdf->rapport_taal)." ".date("j",db2jul($this->rapportageDatumVanaf))." ".vertaalTekst($this->pdf->__appvar["Maanden"][date("n",db2jul($this->rapportageDatumVanaf))],$this->pdf->taal)." ".date("Y",db2jul($this->rapportageDatumVanaf)));
  $waardeRapdatum=array("",vertaalTekst("Waarde portefeuille per",$this->pdf->rapport_taal)." ".date("j",db2jul($this->rapportageDatum))." ".vertaalTekst($this->pdf->__appvar["Maanden"][date("n",db2jul($this->rapportageDatum))],$this->pdf->taal)." ".date("Y",db2jul($this->rapportageDatum)));
  $mutwaarde=array("",vertaalTekst("Mutatie waarde portefeuille",$this->pdf->rapport_taal));
  $stortingen=array("",vertaalTekst("Totaal stortingen verslagperiode",$this->pdf->rapport_taal));
  $onttrekking=array("",vertaalTekst("Totaal onttrekkingen verslagperiode",$this->pdf->rapport_taal));
  $resultaat=array("",vertaalTekst("Resultaat over verslagperiode",$this->pdf->rapport_taal));
  $rendement=array("",vertaalTekst("Rendement over verslagperiode",$this->pdf->rapport_taal));
  $rendementBenchmark=array("",vertaalTekst("Rendement benchmark",$this->pdf->rapport_taal));
  $ongerealiseerd=array("",vertaalTekst("Ongerealiseerde koersresultaten",$this->pdf->rapport_taal)); //
$gerealiseerd=array("",vertaalTekst("Gerealiseerde koersresultaten",$this->pdf->rapport_taal)); //
$valutaResultaat=array("",vertaalTekst("Koersresultaten valuta's",$this->pdf->rapport_taal)); //
$totaalResultaat=array("",vertaalTekst("Koersresultaat",$this->pdf->rapport_taal)); //
$rente=array("",vertaalTekst("Mutatie opgelopen rente",$this->pdf->rapport_taal));//
$totaalOpbrengst=array("",vertaalTekst("Totaal beleggingsresultaat",$this->pdf->rapport_taal));//totaalOpbrengst
$aandeel=array("",vertaalTekst("Percentage v/h vermogen",$this->pdf->rapport_taal));//

    $totaalKosten=array("",vertaalTekst("Totaal kosten",$this->pdf->rapport_taal));   //totaalKosten
    $totaal=array("",vertaalTekst("Resultaat over verslagperiode",$this->pdf->rapport_taal));   //totaalOpbrengst-totaalKosten
  
  
   $vkmBeheervergoeding=array("",vertaalTekst("Beheervergoeding",$this->pdf->rapport_taal));//
   $vkmBankkosten=array("",vertaalTekst("Bankkosten",$this->pdf->rapport_taal));//
   $vkmOverigekosten=array("",vertaalTekst("Overige kosten",$this->pdf->rapport_taal));//
   $vkmProductkosten=array("",vertaalTekst("Productkosten",$this->pdf->rapport_taal));//
   $vkmTotaal=array("",vertaalTekst("Totaal kostenpercentage",$this->pdf->rapport_taal));//
   $vkmKostenTonen=array();

  foreach($perfWaarden as $portefeuille=>$waarden)
  {
  
    $vkmWaarden=$this->VKMBerekening($portefeuille,$perfWaarden[$portefeuille]['waardeBegin'],$perfWaarden[$portefeuille]['waardeEind']);
    foreach($vkmWaarden as $key=>$value)
    {
      if($value<>0)
      {
        $vkmKostenTonen[$key] = true;
        $vkmKostenTonen['header'] = true;
      }
    }
    
    if($perfWaarden[$portefeuille]['waardeEind']==0 || $perfWaarden[$portefeuille]['waardeBegin']==0)
    {
      for($i=0;$i<2;$i++)
      {
        $vkmBeheervergoeding[] = '';
        $vkmBankkosten[] = '';
        $vkmOverigekosten[] = '';
        $vkmProductkosten[] = '';
        $vkmTotaal[] = '';
      }
    }
    else
    {
      $vkmBeheervergoeding[] = $this->formatGetal($vkmWaarden['beheervergoeding'], 2);
      $vkmBeheervergoeding[] = '%';
      $vkmBankkosten[] = $this->formatGetal($vkmWaarden['bankkosten'], 2);
      $vkmBankkosten[] = '%';
      $vkmOverigekosten[] = $this->formatGetal($vkmWaarden['overigekosten'], 2);
      $vkmOverigekosten[] = '%';
      $vkmProductkosten[] = $this->formatGetal($vkmWaarden['productkosten'], 2);
      $vkmProductkosten[] = '%';
      $vkmTotaal[] = $this->formatGetal($vkmWaarden['vkm'], 2);
      $vkmTotaal[] = '%';
    }
    $perbegin[]=$this->formatGetal($perfWaarden[$portefeuille]['waardeBegin'],0,true);
    $perbegin[]='';
    $waardeRapdatum[]=$this->formatGetal($perfWaarden[$portefeuille]['waardeEind'],0,true);
    $waardeRapdatum[]='';
    $mutwaarde[]=$this->formatGetal($perfWaarden[$portefeuille]['waardeMutatie'],0,true);
    $mutwaarde[]='';
    $stortingen[]=$this->formatGetal($perfWaarden[$portefeuille]['stortingen'],0);
    $stortingen[]='';
    $onttrekking[]=$this->formatGetal($perfWaarden[$portefeuille]['onttrekkingen']*-1,0);
    $onttrekking[]='';
    $resultaat[]=$this->formatGetal($perfWaarden[$portefeuille]['resultaatVerslagperiode'],0);
    $resultaat[]='';
    $rendement[]=$this->formatGetal($perfWaarden[$portefeuille]['rendementProcent'],2);
    $rendement[]='%';


    //$bechmarkOnderdrukken=false;
    if($perfWaarden[$portefeuille]['resetPlan']==true)
    {
      $rendementBenchmark[] = '';
      $rendementBenchmark[] = '';
    }
    else
    {
      $rendementBenchmark[] = $this->formatGetal($perfWaarden[$portefeuille]['rendementBenchmark'], 2);
      $rendementBenchmark[] = '%';
    }

    $ongerealiseerd[]=$this->formatGetal($perfWaarden[$portefeuille]['ongerealiseerdeKoersResultaat'],0);
    $ongerealiseerd[]='';
    $gerealiseerd[]=$this->formatGetal($perfWaarden[$portefeuille]['gerealiseerdeKoersResultaat'],0);
    $gerealiseerd[]='';
    $valutaResultaat[]=$this->formatGetal($perfWaarden[$portefeuille]['koersResulaatValutas'],0);
    $valutaResultaat[]='';

    $totaalResultaat[]=$this->formatGetal($perfWaarden[$portefeuille]['ongerealiseerdeKoersResultaat']+$perfWaarden[$portefeuille]['gerealiseerdeKoersResultaat']+$perfWaarden[$portefeuille]['koersResulaatValutas']
      -$perfWaarden[$portefeuille]['resultaatCorrectie'],0);
    $totaalResultaat[]='';   
    
    $rente[]=$this->formatGetal($perfWaarden[$portefeuille]['opgelopenRente'],0);
    $rente[]='';
    $totaalOpbrengst[]=$this->formatGetal($perfWaarden[$portefeuille]['totaalOpbrengst'],0);
    $totaalOpbrengst[]='';
    $totaalKosten[]=$this->formatGetal($perfWaarden[$portefeuille]['totaalKosten'],0);
    $totaalKosten[]='';
    $totaal[]=$this->formatGetal($perfWaarden[$portefeuille]['totaalOpbrengst']-$perfWaarden[$portefeuille]['totaalKosten'],0);
    $totaal[]='';
    $aandeel[]=$this->formatGetal($perfWaarden[$portefeuille]['waardeEind']/$this->perfWaarden[$this->portefeuille]['waardeEind']*100,1);
    $aandeel[]='%';
    
  }     

 // if($longName==true && count($portefeuilles) < 8)
   //else
  //  $cols=9;
   //
   $cols=7;
   $w2=5;
    $w=(297-2*8-75-($cols*$w2))/$cols;
    
  	$this->pdf->widthB = array(0,75,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2);
		$this->pdf->alignB = array('L','L','R','L','R','L','R','L','R','L','R','L','R','L','R','L','R','L','R');
    $this->pdf->widthA = $this->pdf->widthB;
		$this->pdf->alignA = $this->pdf->alignB;
  
 // $this->pdf->ln();

		$this->pdf->SetWidths($this->pdf->widthB);
		$this->pdf->SetAligns($this->pdf->alignB);
  		$this->pdf->SetFont($this->pdf->rapport_font,$this->pdf->rapport_kop_fontstyle,10);//$this->pdf->rapport_kop_fontsize
    //$this->pdf->fillCell=$fillArray;
    $this->pdf->SetTextColor($this->pdf->rapport_kop_fontcolor['r'],$this->pdf->rapport_kop_fontcolor['g'],$this->pdf->rapport_kop_fontcolor['b']);
    $ystart=$this->pdf->getY();
		$this->pdf->row($header);
   $this->pdf->setY($ystart+8);
		$this->pdf->SetFont($this->pdf->rapport_font,'',$this->pdf->rapport_fontsize);
    $this->pdf->SetTextColor($this->pdf->rapport_fontcolor['r'],$this->pdf->rapport_fontcolor['g'],$this->pdf->rapport_fontcolor['b']);
    $this->pdf->fillCell=array();
		$this->pdf->SetWidths($this->pdf->widthA);
		$this->pdf->SetAligns($this->pdf->alignA);

		$this->pdf->row($perbegin);
	//,$this->formatGetal($data['periode']['waardeBegin'],2,true),"",$this->formatGetal($data['ytm']['waardeBegin'],2,true),""));
    $this->pdf->CellBorders = $subOnder;
		$this->pdf->row($waardeRapdatum);//$this->formatGetal($data['periode']['waardeEind'],0),"",$this->formatGetal($data['ytm']['waardeEind'],0),""));
    $this->pdf->CellBorders = array();
			// subtotaal
		//$this->pdf->Line($posSubtotaal+$extraLengte  ,$this->pdf->GetY() ,$posSubtotaalEnd ,$this->pdf->GetY());
		$this->pdf->ln();
		$this->pdf->row($mutwaarde);//,$this->formatGetal($data['periode']['waardeMutatie'],0),"",$this->formatGetal($data['ytm']['waardeMutatie'],0),""));
		$this->pdf->row($stortingen);////,$this->formatGetal($data['periode']['stortingen'],0),"",$this->formatGetal($data['ytm']['stortingen'],0),""));
		$this->pdf->CellBorders = $subOnder;
    $this->pdf->row($onttrekking);//,$this->formatGetal($data['periode']['onttrekkingen'],0),"",$this->formatGetal($data['ytm']['onttrekkingen'],0),""));
    $this->pdf->ln();
		$this->pdf->row($resultaat);//,$this->formatGetal($data['periode']['resultaatVerslagperiode'],0),"",$this->formatGetal($data['ytm']['resultaatVerslagperiode'],0),""));
		$this->pdf->ln();
     unset( $this->pdf->CellBorders );
    $this->pdf->SetFont($this->pdf->rapport_font,'b',$this->pdf->rapport_fontsize);
		$this->pdf->row($rendement);//,$this->formatGetal($data['periode']['rendementProcent'],0),"%",$this->formatGetal($data['ytm']['rendementProcent'],0),"%"));
    $this->pdf->CellBorders = $volOnder;

    $this->pdf->row($rendementBenchmark);//,$this->formatGetal($data['periode']['rendementProcent'],0),"%",$this->formatGetal($data['ytm']['rendementProcent'],0),"%"));
    $this->pdf->ln(3);

    $this->pdf->row($aandeel);
    $this->pdf->ln(3);
    $this->pdf->SetFont($this->pdf->rapport_font,'',$this->pdf->rapport_fontsize);
    $this->pdf->CellBorders = array();
	//	$ypos = $this->pdf->GetY()-5;
	//	$this->pdf->SetY($ypos);

		$this->pdf->SetWidths($this->pdf->widthB);
		$this->pdf->SetAligns($this->pdf->alignB);
		$this->pdf->SetFont($this->pdf->rapport_font,'b',$this->pdf->rapport_fontsize);
    //$this->pdf->fillCell=$fillArray;
   // $this->pdf->SetTextColor(255,255,255);
    $YSamenstelling=$this->pdf->GetY();
		//$this->pdf->row($samenstelling);//,"","","",""));
		//$this->pdf->SetFont($this->pdf->rapport_font,$kopStyle,$this->pdf->rapport_fontsize);
    $this->pdf->fillCell=array();
    $this->pdf->SetTextColor(0,0,0);
    $this->pdf->SetFont($this->pdf->rapport_font,'b',$this->pdf->rapport_fontsize);
		$this->pdf->row(array("",vertaalTekst("Beleggingsresultaat",$this->pdf->rapport_taal),"",""));
		$this->pdf->SetFont($this->pdf->rapport_font,'',$this->pdf->rapport_fontsize);


		$this->pdf->SetWidths($this->pdf->widthA);
		$this->pdf->SetAligns($this->pdf->alignA);
		//$this->pdf->row($ongerealiseerd);//,$this->formatGetal($data['periode']['ongerealiseerdeKoersResultaat'],0),"",$this->formatGetal($data['ytm']['ongerealiseerdeKoersResultaat'],0),""));
    //$this->pdf->row($gerealiseerd);//,$this->formatGetal($data['periode']['gerealiseerdeKoersResultaat'],0),"",$this->formatGetal($data['ytm']['gerealiseerdeKoersResultaat'],0),""));
  //	if(round($data['periode']['koersResulaatValutas'],0) != 0.00 || round($data['ytm']['koersResulaatValutas'],0) != 0.00)
		//  $this->pdf->row($valutaResultaat);//,$this->formatGetal($data['periode']['koersResulaatValutas'],0),"",$this->formatGetal($data['ytm']['koersResulaatValutas'],0),""));
		$this->pdf->row($totaalResultaat);
   if(!in_array('Directe opbrengsten',$opbrengstCategorien))
     $this->pdf->row($rente);//,$this->formatGetal($data['periode']['opgelopenRente'],0),"",$this->formatGetal($data['ytm']['opgelopenRente'],0),""));

		$keys=array();
		foreach ($data['periode']['opbrengstenPerGrootboek'] as $key=>$val)
		  $keys[]=$key;

		foreach ($opbrengstCategorien as $categorie)
		{
		  $tmp=array("",vertaalTekst($categorie,$this->pdf->rapport_taal));
      foreach($perfWaarden as $port=>$waarden)
      {
        $tmp[]=$this->formatGetal($waarden['opbrengstenPerGrootboek'][$categorie],0);
        $tmp[]='';
      }
		  //if(round($data['periode']['opbrengstenPerGrootboek'][$key],0) != 0.00 || round($data['ytm']['opbrengstenPerGrootboek'][$key],0) != 0.00)
			  $this->pdf->row($tmp);//;array(,$this->formatGetal($data['periode']['opbrengstenPerGrootboek'][$key],0),"",$this->formatGetal($data['ytm']['opbrengstenPerGrootboek'][$key],0),""));
      if($categorie=='Directe opbrengsten')
        $this->pdf->row($rente);//,$this->formatGetal($data['periode']['opgelopenRente'],0),"",$this->formatGetal($data['ytm']['opgelopenRente'],0),""));

    }

    $this->pdf->CellBorders = $subBoven;
		$this->pdf->row($totaalOpbrengst);//array("","",$this->formatGetal($data['periode']['totaalOpbrengst'],0),"",$this->formatGetal($data['ytm']['totaalOpbrengst'],0)));
		$this->pdf->ln();
    $this->pdf->CellBorders = array();

		$this->pdf->SetWidths($this->pdf->widthB);
		$this->pdf->SetAligns($this->pdf->alignB);

		$this->pdf->SetFont($this->pdf->rapport_font,'b',$this->pdf->rapport_fontsize);
		$this->pdf->row(array("",vertaalTekst("Kosten",$this->pdf->rapport_taal),"",""));
		$this->pdf->SetFont($this->pdf->rapport_font,'',$this->pdf->rapport_fontsize);
		$this->pdf->SetWidths($this->pdf->widthA);
		$this->pdf->SetAligns($this->pdf->alignA);

		foreach ($kostenCategorien as $categorie)
		{
		  
      $tmp=array("",vertaalTekst($categorie,$this->pdf->rapport_taal));
      foreach($perfWaarden as $port=>$waarden)
      {
        $tmp[]=$this->formatGetal($waarden['kostenPerGrootboek'][$categorie],0);
        $tmp[]='';
      }
      //		  if(round($data['periode']['kostenPerGrootboek'][$key],0) != 0.00 || round($data['ytm']['kostenPerGrootboek'][$key],0) != 0.00)
			$this->pdf->row($tmp);//array("",vertaalTekst($key,$this->pdf->rapport_taal),$this->formatGetal($data['periode']['kostenPerGrootboek'][$key],0),"",$this->formatGetal($data['ytm']['kostenPerGrootboek'][$key],0),""));
		}
    $this->pdf->CellBorders = $subBoven;
  	$this->pdf->row($totaalKosten);//$this->formatGetal($data['periode']['totaalKosten'],0),"",$this->formatGetal($data['ytm']['totaalKosten'],0)));
    $this->pdf->CellBorders = $volOnder;
    $this->pdf->ln();
    $this->pdf->SetFont($this->pdf->rapport_font,'b',$this->pdf->rapport_fontsize);
	  $this->pdf->row($totaal);//"","",$this->formatGetal($data['periode']['totaalOpbrengst']-$data['periode']['totaalKosten'],0),"",$this->formatGetal($data['ytm']['totaalOpbrengst']-$data['ytm']['totaalKosten'],0),''));
    $actueleWaardePortefeuille = 0;
		$this->pdf->SetFont($this->pdf->rapport_font,'',$this->pdf->rapport_fontsize);
    $this->pdf->CellBorders = array();
  
  
  if($vkmKostenTonen['header']==true)
  {
   $w=(297-2*8-75-(7*5))/$cols;
   $w2=5;
   $this->pdf->widthB = array(0,75,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2,$w,$w2);
   $this->pdf->alignB = array('L','L','R','L','R','L','R','L','R','L','R','L','R','L','R','L','R','L','R');
   $this->pdf->SetWidths($this->pdf->widthB);
   $this->pdf->SetAligns($this->pdf->alignB);
   
   $this->pdf->ln();
   $this->pdf->SetFont($this->pdf->rapport_font, 'b', $this->pdf->rapport_fontsize);
   $this->pdf->row(array('Kosten op jaarbasis'));
   $this->pdf->SetFont($this->pdf->rapport_font, '', $this->pdf->rapport_fontsize);
   $this->pdf->ln(1);
   if($vkmKostenTonen['beheervergoeding']==true)
     $this->pdf->row($vkmBeheervergoeding);
   if($vkmKostenTonen['bankkosten']==true)
     $this->pdf->row($vkmBankkosten);
   if($vkmKostenTonen['overigekosten']==true)
     $this->pdf->row($vkmOverigekosten);
   if($vkmKostenTonen['productkosten']==true)
     $this->pdf->row($vkmProductkosten);
   $this->pdf->ln(1);
   $this->pdf->SetFont($this->pdf->rapport_font, 'b', $this->pdf->rapport_fontsize);
   if($vkmKostenTonen['vkm']==true)
     $this->pdf->row($vkmTotaal);
   $this->pdf->SetFont($this->pdf->rapport_font, '', $this->pdf->rapport_fontsize);
  
  }
  
 }
 
 function getWaarden($portefeuille,$vanafDatum,$totDatum)
	{
    
    $db=new DB();
    $query="SELECT Startdatum FROM Portefeuilles WHERE Portefeuille='$portefeuille'";
    $db->SQL($query);
    $db->Query();
    $startdatum=$db->lookupRecord();
    if(db2jul($startdatum['Startdatum']) > db2jul($vanafDatum))
    {
      $vanafDatum = $startdatum['Startdatum'];
    }
    $this->perf = new RapportPERF_L68($this->pdf,$portefeuille,$vanafDatum,$totDatum);
    $this->pdf->rapport_type = "PERFD";
    $this->pdf->rapport_titel = "Performancemeting over de portefeuilles";

    //$this->att=new ATTberekening_L68($this);
    if($portefeuille<>$this->portefeuille)
      $this->perf->att->benchmarkPortefeuille=$portefeuille;
    else
      $this->perf->att->benchmarkPortefeuille='';
    
    if ($this->pdf->lastPOST['doorkijk'] == 1)
      $hpiGebruik=true;
    else
      $hpiGebruik=false;
    
    $waarden = $this->perf->att->bereken($vanafDatum ,$totDatum,'totaal',$hpiGebruik);
   // exit;
    //listarray($waarden['totaal']);exit;
    $waarden=$waarden['totaal'];
    $resetPlan=false;
    foreach($waarden['perfWaarden'] as $datum=>$perfWaarden)
    {
      if(round(array_sum($perfWaarden['planTotalen']),2)<>1.00)
      {
        $resetPlan = true;
      }
    }
   // echo $portefeuille;
   // unset($waarden['perfWaarden']);
   // listarray($waarden);
    
    $waarden['ongerealiseerdeKoersResultaat']=$waarden['ongerealiseerdFondsResultaat']+$waarden['ongerealiseerdValutaResultaat'];
    $waarden['waardeEind']=$waarden['eindwaarde'];
    $waarden['resetPlan']= $resetPlan;
    $waarden['waardeBegin']=$waarden['beginwaarde'];
    $waarden['waardeMutatie']=$waarden['eindwaarde']-$waarden['beginwaarde'];
    $waarden['stortingen']=$waarden['storting'];
    $waarden['onttrekkingen']=$waarden['onttrekking'];
    $waarden['resultaatVerslagperiode']=$waarden['resultaat'];
    $waarden['rendementProcent']=$waarden['procent'];
    $waarden['rendementBenchmark']=$waarden['indexPerf'];
    $waarden['gerealiseerdeKoersResultaat']=$waarden['gerealiseerdFondsResultaat']+$waarden['gerealiseerdValutaResultaat'];
    $waarden['opgelopenRente']=$waarden['rente'];//$renteOpEindDatum-$renteOpStartDatum;
    $waarden['totaalOpbrengst']=$waarden['ongerealiseerdeKoersResultaat']+$waarden['gerealiseerdeKoersResultaat'];//+$waarden['rente'];
    $waarden['opbrengstenPerGrootboek']= $waarden['grootboekOpbrengsten'];
  //  listarray($waarden);
    foreach( $waarden['grootboekKosten'] as $grootboek=>$kosten)
      $waarden['kostenPerGrootboek'][$grootboek]= $kosten*-1;

    $totaalOpbrengst=$waarden['totaalOpbrengst'];// + $waarden['opbrengsten'];
    $totaalKosten=abs($waarden['kosten']);

    $opbrengstenPerGrootboek=$waarden['opbrengstenPerGrootboek'];
    $waarden['opbrengstenPerGrootboek']=array();
    foreach($opbrengstenPerGrootboek as $grootboek=>$waarde)
    {
       $waarden['opbrengstenPerGrootboek']['Directe opbrengsten'] +=  $waarde;
    }
		$waarden['totaalOpbrengst']=$totaalOpbrengst;

      $query = "SELECT DISTINCT(Grootboekrekeningen.Grootboekrekening) as Grootboekrekening, Grootboekrekeningen.Omschrijving FROM Grootboekrekeningen WHERE Grootboekrekeningen.kosten = '1' ORDER BY Grootboekrekeningen.Afdrukvolgorde";
      $DB = new DB();
      $DB->SQL($query);
      $DB->Query();
      $gbOmschrijvingen=array();
      while($gb = $DB->nextRecord())
      {

        $gbOmschrijvingen[$gb['Grootboekrekening']]=$gb['Omschrijving'];
      }
      $tmp=$waarden['kostenPerGrootboek'];
      $waarden['kostenPerGrootboek']=array();
      foreach($tmp as $gb=>$waarde)
      {
        $waarden['kostenPerGrootboek'][$gbOmschrijvingen[$gb]]=$waarde;
      }

		$waarden['totaalKosten']=$totaalKosten;


		$koersResulaatValutas = $waarden['resultaatVerslagperiode'] - ($totaalOpbrengst  - $waarden['totaalKosten']);
		$totaalOpbrengst += $koersResulaatValutas;
		//echo $koersResulaatValutas;exit;
    //$waarden['koersResulaatValutas']=$koersResulaatValutas;
		
		$waarden['totaalOpbrengst']=$totaalOpbrengst;

    $resultaatCorrectie=($waarden['ongerealiseerdeKoersResultaat']+$waarden['gerealiseerdeKoersResultaat']+$waarden['koersResulaatValutas'])-($totaalOpbrengst-$waarden['opbrengstenPerGrootboek']['Directe opbrengsten']-$waarden['opgelopenRente']);
    //echo "$resultaatCorrectie=$totaalOpbrengst-".$waarden['opbrengstenPerGrootboek']['Directe opbrengsten']."-".$waarden['opgelopenRente']."<br>\n";
   //echo $waarden['ongerealiseerdeKoersResultaat']+$waarden['gerealiseerdeKoersResultaat']+$waarden['koersResulaatValutas']." | $resultaatCorrectie";
   $waarden['resultaatCorrectie']=$resultaatCorrectie;
   
		return $waarden;
	}

  
  

  
  function VKMBerekening($portefeuille,$beginwaarde,$eindWaarde)
  {

    if($this->pdf->lastPOST['doorkijk']==1)
    {
      if($eindWaarde==0)
        $gemiddeldeWaarde=($beginwaarde+$eindWaarde)/2;
      else
        $gemiddeldeWaarde=$eindWaarde;//($beginwaarde+$eindWaarde)/2;
      $vkmData=array();
      $restWaarde=$gemiddeldeWaarde;
      
      if($portefeuille<>$this->portefeuille)
      {
        vulTijdelijkeTabel(
          berekenPortefeuilleWaarde($portefeuille,$this->rapportageDatum,(substr($this->rapportageDatum,5,5)=='01-01'?true:false),'EUR',$this->rapportageDatumVanaf),
          $portefeuille,$this->rapportageDatum);
      }
      
      $this->verdiept = new portefeuilleVerdiept($this->pdf, $portefeuille, $this->rapportageDatum);
      $totalenKosten=array();
      foreach($this->verdiept->verdiepteData as $doorkijkFondsData)
      {
        $restWaarde=$restWaarde-$doorkijkFondsData['aandeelWaarde'];
     //   $aandeelOpTotaal=$doorkijkFondsData['aandeelWaarde']/$gemiddeldeWaarde;
        $vkmPortefeuille=$this->verdiept->FondsPortefeuilleData[$doorkijkFondsData['fonds']];
        $vkm=new RapportVKM(null,  $vkmPortefeuille,  $this->rapportageDatumVanaf,  $this->rapportageDatum);
        $vkm->writeRapport();

        $bankKosten=$vkm->vkmWaarde['grootboekKosten']['KNBA']+$vkm->vkmWaarde['grootboekKosten']['KOBU'];
        $losGetoondeKosaten=$vkm->vkmWaarde['grootboekKosten']['BEH']+$bankKosten;
        /*
        $vkmData['beheervergoeding']+=$vkm->vkmWaarde['grootboekKosten']['BEH']/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
      //  echo $vkmData['beheervergoeding']."+=".$vkm->vkmWaarde['grootboekKosten']['BEH']."/".$vkm->vkmWaarde['gemiddeldeWaarde']."*100*$aandeelOpTotaal <br>\n";
        $vkmData['bankkosten']+=($bankKosten)/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
       // echo " $vkmPortefeuille =>  ($bankKosten)/".$vkm->vkmWaarde['gemiddeldeWaarde']."*100*$aandeelOpTotaal<br>\n";
        $vkmData['overigekosten']+=($vkm->vkmWaarde['grootBoekKostenTotaal']-$losGetoondeKosaten)/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
        $vkmData['productkosten']+=$vkm->vkmWaarde['totaalDoorlopendekosten']/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
        $vkmData['vkm']+=$vkm->vkmWaarde['vkmWaarde']*$aandeelOpTotaal;
       // echo "portefeuille $vkmPortefeuille : ".round($aandeelOpTotaal,4)." ".$vkm->vkmWaarde['vkmWaarde']."<br>\n";
  */
    //    echo " $portefeuille, $vkmPortefeuille <br>\n";
    //    listarray($vkm->vkmWaarde);
        $totalenKosten['beheervergoeding']+=$vkm->vkmWaarde['grootboekKosten']['BEH'];
        $totalenKosten['bankkosten']+=$bankKosten;
        $totalenKosten['overigekosten']+=$vkm->vkmWaarde['grootBoekKostenTotaal']-$losGetoondeKosaten;
        $totalenKosten['productkosten']+=$vkm->vkmWaarde['totaalDoorlopendekosten'];
        $totalenKosten['gemiddeldeWaarde']+=$vkm->vkmWaarde['gemiddeldeWaarde'];
      }
//exit;
      $aandeelOpTotaal=$restWaarde/$gemiddeldeWaarde;
//listarray($vkmData);
 //echo "$portefeuille rest : $aandeelOpTotaal <br>\n";

      if(round($aandeelOpTotaal,2)<>0)
      {
        //echo "rest $portefeuille $aandeelOpTotaal <br>\n";
        $vkm = new RapportVKM(null, $portefeuille, $this->rapportageDatumVanaf, $this->rapportageDatum);
        $vkm->writeRapport();
        $bankKosten = $vkm->vkmWaarde['grootboekKosten']['KNBA'] + $vkm->vkmWaarde['grootboekKosten']['KOBU'];
        $losGetoondeKosaten = $vkm->vkmWaarde['grootboekKosten']['BEH'] + $bankKosten;
        /*
        $vkmData['beheervergoeding']+=$vkm->vkmWaarde['grootboekKosten']['BEH']/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
        echo $vkmData['beheervergoeding']."+=".$vkm->vkmWaarde['grootboekKosten']['BEH']."/".$vkm->vkmWaarde['gemiddeldeWaarde']."*100*$aandeelOpTotaal <br>\n";
        $vkmData['bankkosten']+=($bankKosten)/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
        $vkmData['overigekosten']+=($vkm->vkmWaarde['grootBoekKostenTotaal']-$losGetoondeKosaten)/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
        $vkmData['productkosten']+=$vkm->vkmWaarde['totaalDoorlopendekosten']/$vkm->vkmWaarde['gemiddeldeWaarde']*100*$aandeelOpTotaal;
        $vkmData['vkm']+=$vkm->vkmWaarde['vkmWaarde']*$aandeelOpTotaal;
  */
        $totalenKosten['beheervergoeding']+=$vkm->vkmWaarde['grootboekKosten']['BEH'];
        $totalenKosten['bankkosten']+=$bankKosten;
        $totalenKosten['overigekosten']+=$vkm->vkmWaarde['grootBoekKostenTotaal']-$losGetoondeKosaten;
        $totalenKosten['productkosten']+=$vkm->vkmWaarde['totaalDoorlopendekosten'];
        $totalenKosten['gemiddeldeWaarde']+=$vkm->vkmWaarde['gemiddeldeWaarde']*$aandeelOpTotaal;
      //  echo " $portefeuille, rest | ".$vkm->vkmWaarde['gemiddeldeWaarde']*$aandeelOpTotaal."<br>\n";//listarray($vkm->vkmWaarde);
      }
  
   //   listarray($vkmData);
   //echo "<br><br>$portefeuille <br>\n";
     //listarray($totalenKosten);
      $kostenTotaal=0;
      foreach($totalenKosten as $vkmSoort=>$waarde)
      {
        if($vkmSoort <> 'gemiddeldeWaarde')
        {
          $vkmData[$vkmSoort]=$waarde/$totalenKosten['gemiddeldeWaarde']*100;
          $kostenTotaal+=$waarde;
        }
      }
      $vkmData['vkm']=$kostenTotaal/$totalenKosten['gemiddeldeWaarde']*100;
     // echo $portefeuille;
    //  listarray($vkmData);
      return $vkmData;
      

    }
    else
    {
      $vkm = new RapportVKM(null, $portefeuille, $this->rapportageDatumVanaf, $this->rapportageDatum);
      $vkm->writeRapport();
      $bankKosten = $vkm->vkmWaarde['grootboekKosten']['KNBA'] + $vkm->vkmWaarde['grootboekKosten']['KOBU'];
      $losGetoondeKosaten = $vkm->vkmWaarde['grootboekKosten']['BEH'] + $bankKosten;
  
      return array('beheervergoeding' => $vkm->vkmWaarde['grootboekKosten']['BEH'] / $vkm->vkmWaarde['gemiddeldeWaarde'] * 100,
                   'bankkosten'       => ($bankKosten) / $vkm->vkmWaarde['gemiddeldeWaarde'] * 100,
                   'overigekosten'    => ($vkm->vkmWaarde['grootBoekKostenTotaal'] - $losGetoondeKosaten) / $vkm->vkmWaarde['gemiddeldeWaarde'] * 100,
                   'productkosten'    => $vkm->vkmWaarde['totaalDoorlopendekosten'] / $vkm->vkmWaarde['gemiddeldeWaarde'] * 100,
                   'vkm'              => $vkm->vkmWaarde['vkmWaarde']);
    }

  }
  
}
?>
